## Building CARP-Benchmarks with a working PPCG, short version for Ubuntu ##
  cd ..
  sudo apt-get install -y libboost-all-dev libtbb-dev build-essential p7zip cmake
  git clone https://github.com/Itseez/opencv.git
  cd opencv
  git checkout 2.4.9
  cd ..
  mkdir opencv-build
  cd opencv-build
  cmake ../opencv -DWITH_TBB=ON -DENABLE_AVX=ON -DENABLE_SSE41=ON -DENABLE_SSE42=ON -DENABLE_SSSE3=ON -DENABLE_SSE3=ON
  make all -j12
  sudo make install
  cd ../CARP-Benchmarks
  make all -j12

## Building ##

To build the CARP-Benchmarks, you need:
- A working OpenCL driver.
- PPCG compiler
	Refer to PPCG readme how to build.
- The following packages needs to be installed (at least on Ubuntu 13.10):
	libboost-filesystem-dev libboost-serialization-dev libboost-system-dev (or, full Boost: libboost-all-dev)
	libtbb-dev
	build-essential
	p7zip
	cmake
- An OpenCV build:
	Tested with 2.4.9
	Download OpenCV
	    git clone https://github.com/Itseez/opencv.git
	Checkout 2.4.9:
	    cd opencv
	    git checkout 2.4.9
	    cd ..
	Configure build with CMake:
	    mkdir opencv-build
	    cd opencv-build
	    cmake ../opencv -DWITH_TBB=ON -DENABLE_AVX=ON -DENABLE_SSE41=ON -DENABLE_SSE42=ON  -DENABLE_SSSE3=ON -DENABLE_SSE3=ON
	  (Warning, if your CPU or OS does not support AVX/SSEx instruction sets, do not add the corresponding compile switches)
	    make all -j12
	Make sure the necessary modules are to be built - CMake should print a (long) status with a "To be built:" list, it should contain core, ocl and highgui (plus their dependencies)
	Optionally, install it as a system library:
	    sudo make install
	
	Alternatively, you can try newer versions that might have fixed the issue in the patch, but those versions are not tested.
- Edit required paths in the makefile in CARP-Benchmarks root directory:
	Change the PPCG path, and OpenCV path, if you have not installed it, or not to the default directory. (Repository path points to the default install dir).
- Build benchmark:
	cd path_to_CARP-Benchmarks
	make all

## Running ##

- Change to the build directory.
- Run ppcg_test_*
	Each executable runs a different operator with all three (C++, OpenCL, PENCIL) implementations.
	Results are cross-checked, and if there is no difference (within a small allowed precision error), total times are reported at the end.
(- the executables test_* run the same code, but using only C compiler; measuring Pencil-as-C compilation performance. Useful to check execution if there is a problem running the PPCG built version.)

## Questions ##

If you have found an error, or have any questions, don't hesitate to connect Robert at robert.david@realeyesit.com!
