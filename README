## Building ##

To build the CARP-Benchmarks, you need:
- A working OpenCL driver.
- PPCG compiler
	Refer to PPCG readme how to build.
- The following packages needs to be installed (at least on Ubuntu 13.12):
	libboost-filesystem-dev libboost-serialization-dev libboost-system-dev (or, full Boost: libboost-all-dev)
	libtbb-dev
	build-essential
- Build OpenCV:
	Tested with a patched version of 2.4.6.1 - the patch is included in the repository.
	Download 2.4.6.1:
	    git clone https://github.com/Itseez/opencv.git
	    git checkout -b2.4.6.1
	Apply 'opencv-2.4.6.1_autolock_and_gpuimg.patch' before building:
	    cd opencv
	    patch -p0 < index path_to_CARP-Benchmarks/opencv-2.4.6.1_autolock_and_gpuimg.patch
	    cd ..
	While building OpenCV, make sure to enable opencv_ocl module in CMake.
	    mkdir opencv-build
	    cd opencv-build
	    cmake -i ../opencv
	This starts cmake in wizard mode, asking questions what to enable/disable. Most settings can be left as default, you need to specify OpenCL headers and libraries.
	Required modules are: opencv_core opencv_imgproc opencv_ocl opencv_highgui, make sure they are "ON" (Should be by default)
	For good performance it is advised to enable all instruction sets (SSE 3/SSSE 3/SSE 4.1/SSE 4.2/AVX) supported by the processor (ENABLE_SSE3=ON, etc.), and Intel Threading Building Blocks (WITH_TBB=ON).
	And finally:
	    make all
	
	Alternatively, you can try newer versions that might have fixed the issue in the patch, but those versions are not tested.
- Edit required paths in the makefile in CARP-Benchmarks root directory:
	Change the PPCG and OpenCV build directories.
- Build benchmark:
	cd path_to_CARP-Benchmarks
	make all

## Running ##

- Change to the build directory.
- Run ppcg_test_*
	Each executable runs a different operator with all three (C++, OpenCL, PENCIL) implementations.
	Results are cross-checked, and if there is no difference (within a small allowed precision error), total times are reported at the end.
(- the executables test_* run the same code, but using only C compiler; measuring Pencil-as-C compilation performance. Useful to check execution if there is a problem running the PPCG built version.)

## Questions ##

If you have found an error, or have any questions, don't hesitate to connect Robert at robert.david@realeyesit.com!
