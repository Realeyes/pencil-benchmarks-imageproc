## Building ##

For building the benchmark, you need:
- PPCG
	Refer to PPCG readme how to build.
- OpenCV
	Tested with a patched version of 2.4.6.1 - the patch is included in the repository. Simply apply 'opencv-2.4.6.1_autolock_and_gpuimg.patch' before building. Newer versions might have fixed the issue, but also might break required APIs.
	While building OpenCV, make sure to enable opencv_ocl module in CMake.
	For good performance it is also advised to enable all instruction sets (SSE 3/SSSE 3/SSE 4.1/SSE 4.2/AVX) supported by the processor, and Intel Threading Building Blocks (TBB).
- xxd
	Probably already exists in your Linux installation, install it if not.
- Edit required paths in the makefile.
	You probably won't have the PPCG compiler at /home/davidrobi/ppcg/ppcg..
- "make all"

## Running ##

- The repository contains a set of large images, compressed. Extract files all to build_dir/pool.
- Add build directory to LD_LIBRARY_PATH.
	It's fine to do "export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:."
- Change to the build directory.
- Run ppcg_test_*
	Each executable runs a different operator with all three (C++, OpenCL, PENCIL) implementations.
	Results are cross-checked, and if there is no difference (within a small allowed precision error), total times are reported at the end.
(- the executables test_* run the same code, but using only C compiler; measuring Pencil-as-C compilation performance. Useful to check execution if there is a problem running the PPCG built version.)

## Questions ##

If you have found an error, or have any questions, don't hesitate to connect Robert at robert.david@realeyesit.com!
